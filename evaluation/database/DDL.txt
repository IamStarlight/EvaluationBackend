create table course
(
    cid     int auto_increment
        primary key,
    cname   varchar(50)  null,
    tid     int          null,
    content varchar(255) null,
    constraint course_teacher_tid_fk
        foreign key (tid) references teacher (tid)
);

create table homework
(
    wid        int auto_increment
        primary key,
    cid        int                                  null,
    title      varchar(50)                          null,
    startTime  timestamp  default CURRENT_TIMESTAMP null,
    endTime    datetime                             null,
    editStatus varchar(2) default '0'               null,
    evaStatus  varchar(2) default '0'               null,
    url        varchar(255)                         null,
    constraint homework_course_cid_fk
        foreign key (cid) references course (cid)
);

create table my_file
(
    fid       int                  not null,
    fname     varchar(255)         null,
    type      varchar(255)         null,
    size      bigint               null,
    url       varchar(255)         null comment '下载链接',
    md5       varchar(255)         null comment '文件md5',
    is_delete tinyint(1) default 0 null,
    enable    tinyint(1) default 1 null comment '是否禁用链接'
);

create table sc
(
    cid   int null,
    sid   int null,
    grade int null,
    constraint sc_course_cid_fk
        foreign key (cid) references course (cid),
    constraint sc_student_sid_fk
        foreign key (sid) references student (sid)
);

create table stu_homework
(
    sid              int          not null,
    wid              int          not null,
    url              varchar(255) null,
    submit_time      datetime     null,
    is_late          int          null,
    total_grade      int          null,
    teacher_grade    int          null,
    teacher_comments varchar(255) null,
    constraint stu_homework_homework_wid_fk
        foreign key (wid) references homework (wid)
            on update cascade,
    constraint stu_homework_student_sid_fk
        foreign key (sid) references student (sid)
);

create table student
(
    sid        int auto_increment
        primary key,
    sname      varchar(20)            null,
    password   varchar(255)           null,
    permission varchar(2) default '3' null,
    email      varchar(50)            null
);

create table teacher
(
    tid        int auto_increment
        primary key,
    tname      varchar(20)   null,
    password   varchar(255)  null,
    permission int default 2 null
);
